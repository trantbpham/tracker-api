!function(e){var t={};function n(s){if(t[s])return t[s].exports;var a=t[s]={i:s,l:!1,exports:{}};return e[s].call(a.exports,a,a.exports,n),a.l=!0,a.exports}n.m=e,n.c=t,n.d=function(e,t,s){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:s})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var s=Object.create(null);if(n.r(s),Object.defineProperty(s,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)n.d(s,a,function(t){return e[t]}.bind(null,a));return s},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="/",n(n.s=13)}([function(e,t){e.exports=require("react")},function(e,t){e.exports=require("react-bootstrap")},function(e,t){e.exports=require("react-router-dom")},function(e,t){e.exports=require("react-router-bootstrap")},function(e,t){e.exports=require("url-search-params")},function(e,t){e.exports=require("express")},function(e,t){e.exports=require("webpack")},function(e,t){e.exports=require("dotenv")},function(e,t){e.exports=require("http-proxy-middleware")},function(e,t){e.exports=require("source-map-support")},function(e,t){e.exports=require("react-dom/server")},function(e,t){e.exports=require("isomorphic-fetch")},function(e,t){e.exports=require("serialize-javascript")},function(e,t,n){e.exports=n(19)},function(e,t){e.exports=require("webpack-dev-middleware")},function(e,t){e.exports=require("webpack-hot-middleware")},function(e,t,n){(function(t){const s=n(17),a=n(18),o=n(6),r={mode:"development",entry:{app:["./browser/App.jsx"]},output:{filename:"[name].bundle.js",path:s.resolve(t,"public"),publicPath:"/"},module:{rules:[{test:/\.jsx?$/,exclude:/node_modules/,use:{loader:"babel-loader",options:{presets:[["@babel/preset-env",{targets:{ie:"11",edge:"15",safari:"10",firefox:"50",chrome:"49"}}],"@babel/preset-react"]}}}]},optimization:{splitChunks:{name:"vendor",chunks:"all"}},plugins:[new o.DefinePlugin({__isBrowser__:"true"})],devtool:"source-map"},i={mode:"development",entry:{server:["./server/uiserver.js"]},target:"node",externals:[a()],output:{filename:"server.js",path:s.resolve(t,"dist"),publicPath:"/"},module:{rules:[{test:/\.jsx?$/,use:{loader:"babel-loader",options:{presets:[["@babel/preset-env",{targets:{node:"10"}}],"@babel/preset-react"]}}}]},plugins:[new o.DefinePlugin({__isBrowser__:"false"})],devtool:"source-map"};e.exports=[r,i]}).call(this,"/")},function(e,t){e.exports=require("path")},function(e,t){e.exports=require("webpack-node-externals")},function(e,t,n){"use strict";n.r(t);var s=n(7),a=n.n(s),o=n(5),r=n.n(o),i=n(8),l=n.n(i),c=n(9),u=n.n(c),h=n(0),d=n.n(h),m=n(10),p=n.n(m),E=n(2),f=n(1),g=n(3),b=n(4),v=n.n(b);class C extends d.a.Component{constructor({location:{search:e}}){super();const t=new v.a(e);this.state={status:t.get("status")||"",effortMin:t.get("effortMin")||"",effortMax:t.get("effortMax")||"",changed:!1},this.onChangeStatus=this.onChangeStatus.bind(this),this.onChangeEffortMin=this.onChangeEffortMin.bind(this),this.onChangeEffortMax=this.onChangeEffortMax.bind(this),this.applyFilter=this.applyFilter.bind(this),this.showOriginalFilter=this.showOriginalFilter.bind(this)}componentDidUpdate(e){const{location:{search:t}}=e,{location:{search:n}}=this.props;t!==n&&this.showOriginalFilter()}onChangeStatus(e){this.setState({status:e.target.value,changed:!0})}onChangeEffortMin(e){e.target.value.match(/^\d*$/)&&this.setState({effortMin:e.target.value,changed:!0})}onChangeEffortMax(e){e.target.value.match(/^\d*$/)&&this.setState({effortMax:e.target.value,changed:!0})}showOriginalFilter(){const{location:{search:e}}=this.props,t=new v.a(e);this.setState({status:t.get("status")||"",effortMin:t.get("effortMin")||"",effortMax:t.get("effortMax")||"",changed:!1})}applyFilter(){const{status:e,effortMin:t,effortMax:n}=this.state,{history:s}=this.props,a=new v.a;e&&a.set("status",e),t&&a.set("effortMin",t),n&&a.set("effortMax",n);const o=a.toString()?"?"+a.toString():"";s.push({pathname:"/issues",search:o})}render(){const{status:e,changed:t}=this.state,{effortMin:n,effortMax:s}=this.state;return d.a.createElement(f.Row,null,d.a.createElement(f.Col,{xs:6,sm:4,md:3,lg:2},d.a.createElement(f.FormGroup,null,d.a.createElement(f.ControlLabel,null,"Status:"),d.a.createElement(f.FormControl,{componentClass:"select",value:e,onChange:this.onChangeStatus},d.a.createElement("option",{value:""},"(All)"),d.a.createElement("option",{value:"New"},"New"),d.a.createElement("option",{value:"Assigned"},"Assigned"),d.a.createElement("option",{value:"Fixed"},"Fixed"),d.a.createElement("option",{value:"Closed"},"Closed")))),d.a.createElement(f.Col,{xs:6,sm:4,md:3,lg:2},d.a.createElement(f.FormGroup,null,d.a.createElement(f.ControlLabel,null,"Effort between:"),d.a.createElement(f.InputGroup,null,d.a.createElement(f.FormControl,{value:n,onChange:this.onChangeEffortMin}),d.a.createElement(f.InputGroup.Addon,null,"-"),d.a.createElement(f.FormControl,{value:s,onChange:this.onChangeEffortMax})))),d.a.createElement(f.Col,{xs:6,sm:4,md:3,lg:2},d.a.createElement(f.FormGroup,null,d.a.createElement(f.ControlLabel,null,"Â "),d.a.createElement(f.ButtonToolbar,null,d.a.createElement(f.Button,{bsStyle:"primary",type:"button",onClick:this.applyFilter},"Apply"),d.a.createElement(f.Button,{type:"button",onClick:this.showOriginalFilter,disabled:!t},"Reset")))))}}var y=Object(E.withRouter)(C);const w=Object(E.withRouter)(({issue:e,location:{search:t},closeIssue:n,deleteIssue:s,index:a})=>{const o={pathname:"/issues/"+e.id,search:t},r=d.a.createElement(f.Tooltip,{id:"close-tooltip",placement:"top"},"Edit Issue"),i=d.a.createElement(f.Tooltip,{id:"close-tooltip",placement:"top"},"Close Issue"),l=d.a.createElement(f.Tooltip,{id:"delete-tooltip",placement:"top"},"Delete Issue");const c=d.a.createElement("tr",null,d.a.createElement("td",null,e.id),d.a.createElement("td",null,e.status),d.a.createElement("td",null,e.owner),d.a.createElement("td",null,e.created.toDateString()),d.a.createElement("td",null,e.effort),d.a.createElement("td",null,e.due?e.due.toDateString():""),d.a.createElement("td",null,e.title),d.a.createElement("td",null,d.a.createElement(g.LinkContainer,{to:"/edit/"+e.id},d.a.createElement(f.OverlayTrigger,{delayShow:1e3,overlay:r},d.a.createElement(f.Button,{bsSize:"xsmall"},d.a.createElement(f.Glyphicon,{glyph:"edit"}))))," ",d.a.createElement(f.OverlayTrigger,{delayShow:1e3,overlay:i},d.a.createElement(f.Button,{bsSize:"xsmall",onClick:function(e){e.preventDefault(),n(a)}},d.a.createElement(f.Glyphicon,{glyph:"remove"})))," ",d.a.createElement(f.OverlayTrigger,{delayShow:1e3,overlay:l},d.a.createElement(f.Button,{bsSize:"xsmall",onClick:function(e){e.preventDefault(),s(a)}},d.a.createElement(f.Glyphicon,{glyph:"trash"})))));return d.a.createElement(g.LinkContainer,{to:o},c)});function S({issues:e,closeIssue:t,deleteIssue:n}){const s=e.map((e,s)=>d.a.createElement(w,{key:e.id,issue:e,closeIssue:t,deleteIssue:n,index:s}));return d.a.createElement(f.Table,{bordered:!0,condensed:!0,hover:!0,responsive:!0},d.a.createElement("thead",null,d.a.createElement("tr",null,d.a.createElement("th",null,"ID"),d.a.createElement("th",null,"Status"),d.a.createElement("th",null,"Owner"),d.a.createElement("th",null,"Created"),d.a.createElement("th",null,"Effort"),d.a.createElement("th",null,"Due Date"),d.a.createElement("th",null,"Title"),d.a.createElement("th",null,"Action"))),d.a.createElement("tbody",null,s))}function x({issue:e}){return e?d.a.createElement("div",null,d.a.createElement("h3",null,"Description"),d.a.createElement("pre",null,e.description)):null}var I=n(11),D=n.n(I);const T=new RegExp("^\\d\\d\\d\\d-\\d\\d-\\d\\d");function M(e,t){return T.test(t)?new Date(t):t}async function F(e,t={},n=null,s=null){const a=process.env.UI_SERVER_API_ENDPOINT;try{const o={"Content-Type":"application/json"};s&&(o.Cookie=s);const r=await D()(a,{method:"POST",credentials:"include",headers:o,body:JSON.stringify({query:e,variables:t})}),i=await r.text(),l=JSON.parse(i,M);if(l.errors){const e=l.errors[0];if("BAD_USER_INPUT"===e.extensions.code){const t=e.extensions.exception.errors.join("\n ");n&&n(`${e.message}:\n ${t}`)}else n&&n(`${e.extensions.code}: ${e.message}`)}return l.data}catch(e){return n&&n("Error in sending data to server: "+e.message),null}}class N extends d.a.Component{componentDidUpdate(){const{showing:e,onDismiss:t}=this.props;e&&(clearTimeout(this.dismissTimer),this.dismissTimer=setTimeout(t,5e3))}componentWillUnmount(){clearTimeout(this.dismissTimer)}render(){const{showing:e,bsStyle:t,onDismiss:n,children:s}=this.props;return d.a.createElement(f.Collapse,{in:e},d.a.createElement("div",{style:{position:"fixed",bottom:20,left:20}},d.a.createElement(f.Alert,{bsStyle:t,onDismiss:n},s)))}}function O(){return(O=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e}).apply(this,arguments)}function P(e){return class extends d.a.Component{constructor(e){super(e),this.state={toastVisible:!1,toastMessage:"",toastType:"success"},this.showSuccess=this.showSuccess.bind(this),this.showError=this.showError.bind(this),this.dismissToast=this.dismissToast.bind(this)}showSuccess(e){this.setState({toastVisible:!0,toastMessage:e,toastType:"success"})}showError(e){this.setState({toastVisible:!0,toastMessage:e,toastType:"danger"})}dismissToast(){this.setState({toastVisible:!1})}render(){const{toastType:t,toastVisible:n,toastMessage:s}=this.state;return d.a.createElement(d.a.Fragment,null,d.a.createElement(e,O({showError:this.showError,showSuccess:this.showSuccess,dismissToast:this.dismissToast},this.props)),d.a.createElement(N,{bsStyle:t,showing:n,onDismiss:this.dismissToast},s))}}}var _={};class k extends d.a.Component{static async fetchData(e,t,n){const s=new v.a(t),a={hasSelection:!1,selectedId:0};s.get("status")&&(a.status=s.get("status"));const o=parseInt(s.get("effortMin"),10);Number.isNaN(o)||(a.effortMin=o);const r=parseInt(s.get("effortMax"),10);Number.isNaN(r)||(a.effortMax=r);const{params:{id:i}}=e,l=parseInt(i,10);Number.isNaN(l)||(a.hasSelection=!0,a.selectedId=l);return await F("query issueList(\n      $status: StatusType\n      $effortMin: Int\n      $effortMax: Int\n      $hasSelection: Boolean!\n      $selectedId: Int!\n    ) {\n      issueList(\n        status: $status\n        effortMin: $effortMin\n        effortMax: $effortMax\n      ) {\n        id title status owner\n        created effort due\n      }\n      issue(id: $selectedId) @include (if : $hasSelection) {\n        id description\n      }\n    }",a,n)}constructor(){super();const e=_.initialData?_.initialData.issueList:null,t=_.initialData?_.initialData.issue:null;delete _.initialData,this.state={issues:e,selectedIssue:t},this.closeIssue=this.closeIssue.bind(this),this.deleteIssue=this.deleteIssue.bind(this)}componentDidMount(){const{issues:e}=this.state;null==e&&this.loadData()}componentDidUpdate(e){const{location:{search:t},match:{params:{id:n}}}=e,{location:{search:s},match:{params:{id:a}}}=this.props;t===s&&n===a||this.loadData()}async loadData(){const{location:{search:e},match:t,showError:n}=this.props,s=await k.fetchData(t,e,n);s&&this.setState({issues:s.issueList,selectedIssue:s.issue})}async closeIssue(e){const{issues:t}=this.state,{showError:n}=this.props,s=await F("mutation issueClose($id: Int!) {\n      issueUpdate(id: $id, changes: { status: Closed }) {\n        id title status owner\n        effort created due description\n      }\n    }",{id:t[e].id},n);s?this.setState(t=>{const n=[...t.issues];return n[e]=s.issueUpdate,{issues:n}}):this.loadData()}async deleteIssue(e){const{issues:t}=this.state,{location:{pathname:n,search:s},history:a}=this.props,{id:o}=t[e],{showSuccess:r,showError:i}=this.props,l=await F("mutation issueDelete($id: Int!) {\n      issueDelete(id: $id)\n    }",{id:o},i);l&&l.issueDelete?(this.setState(t=>{const r=[...t.issues];return n==="/issues/"+o&&a.push({pathname:"/issues",search:s}),r.splice(e,1),{issues:r}}),r(`Deleted issue ${o} successfully.`)):this.loadData()}render(){const{issues:e}=this.state;if(null==e)return null;const{selectedIssue:t}=this.state;return d.a.createElement(d.a.Fragment,null,d.a.createElement(f.Panel,null,d.a.createElement(f.Panel.Heading,null,d.a.createElement(f.Panel.Title,{toggle:!0},"Filter")),d.a.createElement(f.Panel.Body,{collapsible:!0},d.a.createElement(y,null))),d.a.createElement(S,{issues:e,closeIssue:this.closeIssue,deleteIssue:this.deleteIssue}),d.a.createElement(x,{issue:t}))}}const B=P(k);B.fetchData=k.fetchData;var A=B;function $(){return($=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e}).apply(this,arguments)}class j extends d.a.Component{constructor(e){var t;super(e),this.state={value:(t=e.value,null!=t?t.toString():"")},this.onBlur=this.onBlur.bind(this),this.onChange=this.onChange.bind(this)}onChange(e){e.target.value.match(/^\d*$/)&&this.setState({value:e.target.value})}onBlur(e){const{onChange:t}=this.props,{value:n}=this.state;t(e,function(e){const t=parseInt(e,10);return Number.isNaN(t)?null:t}(n))}render(){const{value:e}=this.state;return d.a.createElement("input",$({type:"text"},this.props,{value:e,onBlur:this.onBlur,onChange:this.onChange}))}}function V(){return(V=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e}).apply(this,arguments)}class L extends d.a.Component{constructor(e){var t;super(e),this.state={value:(t=e.value,null!=t?t.toISOString().substr(0,10):""),focused:!1,valid:!0},this.onFocus=this.onFocus.bind(this),this.onBlur=this.onBlur.bind(this),this.onChange=this.onChange.bind(this)}onFocus(){this.setState({focused:!0})}onBlur(e){const{value:t,valid:n}=this.state,{onValidityChange:s,onChange:a}=this.props,o=function(e){const t=new Date(e);return Number.isNaN(t.getTime())?null:t}(t),r=""===t||null!=o;r!==n&&s&&s(e,r),this.setState({focused:!1,valid:r}),r&&a(e,o)}onChange(e){e.target.value.match(/^[\d-]*$/)&&this.setState({value:e.target.value})}render(){const{valid:e,focused:t,value:n}=this.state,{value:s,onValidityChange:a,...o}=this.props,r=t||!e?n:null!=(i=s)?i.toDateString():"";var i;return d.a.createElement("input",V({},o,{value:r,placeholder:t?"yyyy-mm-dd":null,onFocus:this.onFocus,onBlur:this.onBlur,onChange:this.onChange}))}}class R extends d.a.Component{constructor(e){var t;super(e),this.state={value:(t=e.value,null!=t?t:"")},this.onBlur=this.onBlur.bind(this),this.onChange=this.onChange.bind(this)}onChange(e){this.setState({value:e.target.value})}onBlur(e){const{onChange:t}=this.props,{value:n}=this.state;var s;t(e,0===(s=n).trim().length?null:s)}render(){const{value:e}=this.state,{tag:t="input",...n}=this.props;return d.a.createElement(t,{...n,value:e,onBlur:this.onBlur,onChange:this.onChange})}}class G extends d.a.Component{static async fetchData(e,t,n){const{params:{id:s}}=e;return await F("query issue($id: Int!) {\n      issue(id: $id) {\n        id title status owner\n        effort created due description\n      }\n    }",{id:s},n)}constructor(){super();const e=_.initialData?_.initialData.issue:null;delete _.initialData,this.state={issue:e,invalidFields:{},showingValidation:!1,toastVisible:!1,toastMessage:"",toastType:"success"},this.onChange=this.onChange.bind(this),this.handleSubmit=this.handleSubmit.bind(this),this.onValidityChange=this.onValidityChange.bind(this),this.dismissValidation=this.dismissValidation.bind(this),this.showValidation=this.showValidation.bind(this),this.showSuccess=this.showSuccess.bind(this),this.showError=this.showError.bind(this),this.dismissToast=this.dismissToast.bind(this)}componentDidMount(){const{issue:e}=this.state;null==e&&this.loadData()}componentDidUpdate(e){const{match:{params:{id:t}}}=e,{match:{params:{id:n}}}=this.props;n!==t&&this.loadData()}onChange(e,t){const{name:n,value:s}=e.target,a=void 0===t?s:t;this.setState(e=>({issue:{...e.issue,[n]:a}}))}onValidityChange(e,t){const{name:n}=e.target;this.setState(e=>{const s={...e.invalidFields,[n]:!t};return t&&delete s[n],{invalidFields:s}})}async handleSubmit(e){e.preventDefault(),this.showValidation();const{issue:t,invalidFields:n}=this.state;if(0!==Object.keys(n).length)return;const{id:s,created:a,...o}=t,r=await F("mutation issueUpdate(\n      $id: Int!\n      $changes: IssueUpdateInputs!\n    ) {\n      issueUpdate(\n        id: $id\n        changes: $changes\n      ) {\n        id title status owner\n        effort created due description\n      }\n    }",{changes:o,id:s},this.showError);r&&(this.setState({issue:r.issueUpdate}),this.showSuccess("Updated issue successfully"))}async loadData(){const{match:e}=this.props,t=await G.fetchData(e,null,this.showError);this.setState({issue:t?t.issue:{},invalidFields:{}})}showValidation(){this.setState({showingValidation:!0})}dismissValidation(){this.setState({showingValidation:!1})}showSuccess(e){this.setState({toastVisible:!0,toastMessage:e,toastType:"success"})}showError(e){this.setState({toastVisible:!0,toastMessage:e,toastType:"danger"})}dismissToast(){this.setState({toastVisible:!1})}render(){const{issue:e}=this.state;if(null==e)return null;const{issue:{id:t}}=this.state,{match:{params:{id:n}}}=this.props;if(null==t)return null!=n?d.a.createElement("h3",null,`Issue with ID ${n} not found.`):null;const{invalidFields:s,showingValidation:a}=this.state;let o;0!==Object.keys(s).length&&a&&(o=d.a.createElement(f.Alert,{bsStyle:"danger",onDismiss:this.dismissValidation},"Please correct invalid fields before submitting."));const{issue:{title:r,status:i}}=this.state,{issue:{owner:l,effort:c,description:u}}=this.state,{issue:{created:h,due:m}}=this.state,{toastVisible:p,toastMessage:b,toastType:v}=this.state;return d.a.createElement(f.Panel,null,d.a.createElement(f.Panel.Heading,null,d.a.createElement(f.Panel.Title,null,"Editing issue: "+t)),d.a.createElement(f.Panel.Body,null,d.a.createElement(f.Form,{horizontal:!0,onSubmit:this.handleSubmit},d.a.createElement(f.FormGroup,null,d.a.createElement(f.Col,{componentClass:f.ControlLabel,sm:3},"Created"),d.a.createElement(f.Col,{sm:9},d.a.createElement(f.FormControl.Static,null,h.toDateString()))),d.a.createElement(f.FormGroup,null,d.a.createElement(f.Col,{componentClass:f.ControlLabel,sm:3},"Status"),d.a.createElement(f.Col,{sm:9},d.a.createElement(f.FormControl,{componentClass:"select",name:"status",value:i,onChange:this.onChange},d.a.createElement("option",{value:"New"},"New"),d.a.createElement("option",{value:"Assigned"},"Assigned"),d.a.createElement("option",{value:"Fixed"},"Fixed"),d.a.createElement("option",{value:"Closed"},"Closed")))),d.a.createElement(f.FormGroup,null,d.a.createElement(f.Col,{componentClass:f.ControlLabel,sm:3},"Owner"),d.a.createElement(f.Col,{sm:9},d.a.createElement(f.FormControl,{componentClass:R,name:"owner",value:l,onChange:this.onChange,key:t}))),d.a.createElement(f.FormGroup,null,d.a.createElement(f.Col,{componentClass:f.ControlLabel,sm:3},"Effort"),d.a.createElement(f.Col,{sm:9},d.a.createElement(f.FormControl,{componentClass:j,name:"effort",value:c,onChange:this.onChange,key:t}))),d.a.createElement(f.FormGroup,{validationState:s.due?"error":null},d.a.createElement(f.Col,{componentClass:f.ControlLabel,sm:3},"Due"),d.a.createElement(f.Col,{sm:9},d.a.createElement(f.FormControl,{componentClass:L,onValidityChange:this.onValidityChange,name:"due",value:m,onChange:this.onChange,key:t}),d.a.createElement(f.FormControl.Feedback,null))),d.a.createElement(f.FormGroup,null,d.a.createElement(f.Col,{componentClass:f.ControlLabel,sm:3},"Title"),d.a.createElement(f.Col,{sm:9},d.a.createElement(f.FormControl,{componentClass:R,size:50,name:"title",value:r,onChange:this.onChange,key:t}))),d.a.createElement(f.FormGroup,null,d.a.createElement(f.Col,{componentClass:f.ControlLabel,sm:3},"Description"),d.a.createElement(f.Col,{sm:9},d.a.createElement(f.FormControl,{componentClass:R,tag:"textarea",rows:4,cols:50,name:"description",value:u,onChange:this.onChange,key:t}))),d.a.createElement(f.FormGroup,null,d.a.createElement(f.Col,{smOffset:3,sm:6},d.a.createElement(f.ButtonToolbar,null,d.a.createElement(f.Button,{bsStyle:"primary",type:"submit"},"Submit"),d.a.createElement(g.LinkContainer,{to:"/issues"},d.a.createElement(f.Button,{bsStyle:"link"},"Back"))))),d.a.createElement(f.FormGroup,null,d.a.createElement(f.Col,{smOffset:3,sm:9},o)))),d.a.createElement(f.Panel.Footer,null,d.a.createElement(E.Link,{to:"/edit/"+(t-1)},"Prev")," | ",d.a.createElement(E.Link,{to:"/edit/"+(t+1)},"Next")),d.a.createElement(N,{showing:p,onDismiss:this.dismissToast,bsStyle:v},b))}}class U extends d.a.Component{static async fetchData(){return await F("query {about}")}constructor(e){super(e);const t=_.initialData?_.initialData.about:null;delete _.initialData,this.state={apiAbout:t}}async componentDidMount(){const{apiAbout:e}=this.state;if(null==e){const e=await U.fetchData();this.setState({apiAbout:e.about})}}render(){const{apiAbout:e}=this.state;return d.a.createElement("div",{className:"text-center"},d.a.createElement("h3",null,"Issue Tracker version 0.9"),d.a.createElement("h4",null,e))}}var q=[{path:"/issues/:id?",component:A},{path:"/edit/:id",component:G},{path:"/report",component:function(){return d.a.createElement("div",null,d.a.createElement("h2",null,"This is a placeholder for the Issue Report"))}},{path:"/about",component:U},{path:"*",component:function(){return d.a.createElement("h1",null,"Page Not Found")}}];function H(){return(H=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e}).apply(this,arguments)}function z(){return d.a.createElement(E.Switch,null,d.a.createElement(E.Redirect,{exact:!0,from:"/",to:"/issues"}),q.map(e=>d.a.createElement(E.Route,H({},e,{key:e.path}))))}class J extends d.a.Component{constructor(e){super(e),this.state={showing:!1},this.showModal=this.showModal.bind(this),this.hideModal=this.hideModal.bind(this),this.handleSubmit=this.handleSubmit.bind(this)}showModal(){this.setState({showing:!0})}hideModal(){this.setState({showing:!1})}async handleSubmit(e){e.preventDefault(),this.hideModal();const t=document.forms.issueAdd,n={owner:t.owner.value,title:t.title.value,due:new Date((new Date).getTime()+864e6)},{showError:s}=this.props,a=await F("mutation issueAdd($issue: IssueInputs!) {\n      issueAdd(issue: $issue) {\n        id\n      }\n    }",{issue:n},s);if(a){const{history:e}=this.props;e.push("/edit/"+a.issueAdd.id)}}render(){const{showing:e}=this.state;return d.a.createElement(d.a.Fragment,null,d.a.createElement(f.NavItem,{onClick:this.showModal},d.a.createElement(f.OverlayTrigger,{placement:"left",delayShow:1e3,overlay:d.a.createElement(f.Tooltip,{id:"create-issue"},"Create Issue")},d.a.createElement(f.Glyphicon,{glyph:"plus"}))),d.a.createElement(f.Modal,{keyboard:!0,show:e,onHide:this.hideModal},d.a.createElement(f.Modal.Header,{closeButton:!0},d.a.createElement(f.Modal.Title,null,"Create Issue")),d.a.createElement(f.Modal.Body,null,d.a.createElement(f.Form,{name:"issueAdd"},d.a.createElement(f.FormGroup,null,d.a.createElement(f.ControlLabel,null,"Title"),d.a.createElement(f.FormControl,{name:"title",autoFocus:!0})),d.a.createElement(f.FormGroup,null,d.a.createElement(f.ControlLabel,null,"Owner"),d.a.createElement(f.FormControl,{name:"owner"})))),d.a.createElement(f.Modal.Footer,null,d.a.createElement(f.ButtonToolbar,null,d.a.createElement(f.Button,{type:"button",bsStyle:"primary",onClick:this.handleSubmit},"Submit"),d.a.createElement(f.Button,{bsStyle:"link",onClick:this.hideModal},"Cancel")))))}}var Y=P(Object(E.withRouter)(J));function W(){return d.a.createElement(f.Navbar,{fluid:!0},d.a.createElement(f.Navbar.Header,null,d.a.createElement(f.Navbar.Brand,null,"Issue Tracker")),d.a.createElement(f.Nav,null,d.a.createElement(g.LinkContainer,{exact:!0,to:"/"},d.a.createElement(f.NavItem,null,"Home")),d.a.createElement(g.LinkContainer,{to:"/issues"},d.a.createElement(f.NavItem,null,"Issue List")),d.a.createElement(g.LinkContainer,{to:"/report"},d.a.createElement(f.NavItem,null,"Report"))),d.a.createElement(f.Nav,{pullRight:!0},d.a.createElement(Y,null),d.a.createElement(f.NavDropdown,{id:"user-dropdown",title:d.a.createElement(f.Glyphicon,{glyph:"option-vertical"}),noCaret:!0},d.a.createElement(g.LinkContainer,{to:"/about"},d.a.createElement(f.MenuItem,null,"About")))))}function X(){return d.a.createElement("small",null,d.a.createElement("hr",null),d.a.createElement("p",{className:"text-center"},"Full source code available at this"," ",d.a.createElement("a",{href:"https://github.com/vasansr/pro-mern-stack-2"},"GitHub repository")))}function K(){return d.a.createElement("div",null,d.a.createElement(W,null),d.a.createElement(f.Grid,{fluid:!0},d.a.createElement(z,null)),d.a.createElement(X,null))}var Q=n(12),Z=n.n(Q);var ee=async function(e,t){const n=q.find(t=>Object(E.matchPath)(e.path,t));let s;if(n&&n.component.fetchData){const t=Object(E.matchPath)(e.path,n),a=e.url.indexOf("?"),o=-1!==a?e.url.substr(a):null;s=await n.component.fetchData(t,o)}_.initialData=s;const a={},o=d.a.createElement(E.StaticRouter,{location:e.url,context:a},d.a.createElement(K,null)),r=p.a.renderToString(o);a.url?t.redirect(301,a.url):t.send(function(e,t){return`<!DOCTYPE HTML>\n<html>\n<head>\n  <meta charset="utf-8">\n  <title>Pro MERN Stack</title>\n  <link rel="stylesheet" href="/bootstrap/css/bootstrap.min.css" >\n  <meta name="viewport" content="width=device-width, initial-scale=1.0">\n  <style>\n    table.table-hover tr {cursor: pointer;}\n    .panel-title a {display: block; width: 100%; cursor: pointer;}\n  </style>\n</head>\n<body>\n  \x3c!-- Page generated from template. --\x3e\n  <div id="contents">${e}</div>\n  <script>window.__INITIAL_DATA__ = ${Z()(t)}<\/script>\n  <script src="/env.js"><\/script>\n  <script src="/vendor.bundle.js"><\/script>\n  <script src="/app.bundle.js"><\/script>\n</body>\n</html>\n`}(r,s))};const te=r()();u.a.install(),a.a.config();process.env.ENABLE_HMR;te.use(r.a.static("public"));const ne=process.env.API_PROXY_TARGET;ne&&te.use("/graphql",l()({target:ne})),process.env.UI_API_ENDPOINT||(process.env.UI_API_ENDPOINT="http://localhost:3000/graphql"),process.env.UI_SERVER_API_ENDPOINT||(process.env.UI_SERVER_API_ENDPOINT=process.env.UI_API_ENDPOINT),te.get("/env.js",(e,t)=>{const n={UI_API_ENDPOINT:process.env.UI_API_ENDPOINT};t.send("window.ENV = "+JSON.stringify(n))}),te.get("*",(e,t,n)=>{ee(e,t,n)});const se=process.env.UI_SERVER_PORT||8e3;te.listen(se,()=>{console.log("UI started on port "+se)})}]);
//# sourceMappingURL=server.js.map